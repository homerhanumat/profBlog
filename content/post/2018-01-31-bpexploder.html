---
title: "Exploding Boxplots in R"
author: "Homer White"
date: 2018-01-31T10:30:00
tags: ["htmlwidgets", "javascript"]
aggregators: ["r-bloggers"]
excerpt: "The package bpexploder provides an HTML Widget that makes boxplots that explode upon mouse-click into individual-value plots.  The plots allow for a modest amount of customization, including tool-tips."
ghcommentid: 4
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/d3/d3.min.js"></script>
<script src="/rmarkdown-libs/d3-tip/d3-tip.js"></script>
<link href="/rmarkdown-libs/bpexplode/bpexplode.css" rel="stylesheet" />
<script src="/rmarkdown-libs/bpexplode/bpexplode.js"></script>
<script src="/rmarkdown-libs/bpexploder-binding/bpexploder.js"></script>


<p id="reference">
</p>
<p><code>bpexploder</code> <label for="tufte-mn-" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-" class="margin-toggle"><span class="marginnote"><strong>Credits</strong>: The JavaScript library is based on Mathieu Caule’s <a href="https://mcaule.github.io/d3_exploding_boxplot/">D3 Exploding Boxplots</a>, which I have modified slightly and updated for D3 Version 4. The tool-tips were created by <a href="https://github.com/Caged">Justin Palmer</a>, updated to D3v4 by <a href="https://github.com/VACLab/d3-tip">Dave Gotz</a> and tweaked slightly by myself.</span>represents the author’s initial foray into Html Widgets for R; it renders an svg element showing box-plots that explode upon mouse-click into jittered individual-value plots. The user has the option to configure tool-tips for the individual points.</p>
<div id="installation-and-usage" class="section level2">
<h2>Installation and Usage</h2>
<p>Install the package from Git Hub:</p>
<pre class="r"><code>devtools::install_github(&quot;homerhanumat/bpexploder&quot;)</code></pre>
<p>Call the function with the notorious <code>iris</code> data:</p>
<pre class="r"><code>bpexploder(data = iris,
           settings = list(
             groupVar = &quot;Species&quot;,
             levels = levels(iris$Species),
             yVar = &quot;Petal.Length&quot;,
             tipText = list(
               Petal.Length = &quot;Petal Length&quot;
             ),
             relativeWidth = 0.75)
           )</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="bpexploder html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":{"Sepal.Length":[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5,7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"Sepal.Width":[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8,3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],"Petal.Length":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"Petal.Width":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8],"Species":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"settings":{"groupVar":"Species","levels":["setosa","versicolor","virginica"],"yVar":"Petal.Length","tipText":{"Petal.Length":"Petal Length"},"relativeWidth":0.75,"referenceId":"reference","align":"left","aspect":1.25}},"evals":[],"jsHooks":[]}</script>
<p>Click to explode boxes, double-click to restore.</p>
</div>
<div id="settings" class="section level2">
<h2>Settings</h2>
<p><code>bpexploder</code> provides modest options for customization, as illustrated in the following example:</p>
<pre class="r"><code>bpexploder(data = chickwts,
           settings = list(
             yVar = &quot;weight&quot;,
             # default NULL would make make one plot for yVar
             groupVar = &quot;feed&quot;,
             levels = levels(with(chickwts,
                                  reorder(feed, weight, median))),
             # you could adjust the group labels ...
             levelLabels = NULL,
             # ... and the colors for each group:
             levelColors = RColorBrewer::brewer.pal(6, &quot;Set3&quot;),
             yAxisLabel = &quot;6-week weight (grams)&quot;,
             xAxisLabel = &quot;type of feed&quot;,
             tipText = list(
               # as many os you like of:
               # variableName = &quot;desired tool-tip label&quot;
               # leave tipText at NULL for no tips
               weight = &quot;weight&quot;),
             # set width relative to grandarent element of svg image:
             relativeWidth = 0.75,
             # default alignment within containing div is &quot;center&quot;
             # &quot;left&quot; and &quot;right&quot; are other possible values&quot;
             align = &quot;left&quot;,
             # aspect = width/height, defaults to 1.25
             aspect = 1.5)
           )</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="bpexploder html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"data":{"weight":[179,160,136,227,217,168,108,124,143,140,309,229,181,141,260,203,148,169,213,257,244,271,243,230,248,327,329,250,193,271,316,267,199,171,158,248,423,340,392,339,341,226,320,295,334,322,297,318,325,257,303,315,380,153,263,242,206,344,258,368,390,379,260,404,318,352,359,216,222,283,332],"feed":["horsebean","horsebean","horsebean","horsebean","horsebean","horsebean","horsebean","horsebean","horsebean","horsebean","linseed","linseed","linseed","linseed","linseed","linseed","linseed","linseed","linseed","linseed","linseed","linseed","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","soybean","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","sunflower","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","meatmeal","casein","casein","casein","casein","casein","casein","casein","casein","casein","casein","casein","casein"]},"settings":{"yVar":"weight","groupVar":"feed","levels":["horsebean","linseed","soybean","meatmeal","sunflower","casein"],"levelLabels":null,"levelColors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3","#FDB462"],"yAxisLabel":"6-week weight (grams)","xAxisLabel":"type of feed","tipText":{"weight":"weight"},"relativeWidth":0.75,"align":"left","aspect":1.5,"referenceId":"reference"}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="sizing" class="section level2">
<h2>Sizing</h2>
<p>By default the box-plot chart sizes itself so that its width is the the setting <code>relativeWidth</code> (default-value 1) multiplied by the offset-width of its grandparent node in the HTML DOM. For some layouts—including the <code>tuftesque</code> theme of this post—the default might not give you the type of control you want. In that case you may direct <code>epexploder()</code> to make the width of the chart track the offset-width of an existing DOM element. For example, if paragraphs in your document have the desired width, then create an empty paragraph in your markdown like this:</p>
<pre><code>&lt;p id=&quot;refelem&quot;&gt;&lt;/p&gt;</code></pre>
<p>To set the widget-width to a specific fraction of the element that contains the paragraph, you could again use the <code>relativeWidth</code> setting, or you might try something like:</p>
<pre><code>&lt;p id=&quot;refelem&quot; style=&quot;width: 70%&quot;&gt;&lt;/p&gt;</code></pre>
<p id="refelem">
</p>
<p>In either case, call <code>bpexploder()</code> with the <code>referenceId</code> setting: <label for="tufte-mn-" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-" class="margin-toggle"><span class="marginnote">In fact I’ve been using a reference paragraph throughout this post. Note also that <em>align = “left”</em> is important in <strong>tuftesque</strong> and probably in other Tufte-based themes.</span></p>
<pre class="r"><code>bpexploder(data = iris,
           settings = list(
             groupVar = &quot;Species&quot;,
             levels = levels(iris$Species),
             yVar = &quot;Petal.Length&quot;,
             tipText = list(
               Petal.Length = &quot;Petal Length&quot;
             ),
             #using &lt;p id=&quot;refelem&quot;&gt;&lt;/p&gt;
             referenceId = &quot;refelem&quot;,
             relativeWidth = 0.75,
             align = &quot;left&quot;)
           )</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="bpexploder html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"data":{"Sepal.Length":[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5,7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"Sepal.Width":[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8,3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],"Petal.Length":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"Petal.Width":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8],"Species":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"settings":{"groupVar":"Species","levels":["setosa","versicolor","virginica"],"yVar":"Petal.Length","tipText":{"Petal.Length":"Petal Length"},"referenceId":"refelem","relativeWidth":0.75,"align":"left","aspect":1.25}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="known-issues-and-limitations" class="section level2">
<h2>Known Issues and Limitations</h2>
<ul>
<li>Using the Leonids theme from the <code>prettydoc</code> R Markdown package, tool-tips are not visible in Firefox or Safari. (They do show in Chrome.)</li>
<li>When <code>htmlwidgets::createWidget()</code> creates a widget it gives the widget a random Id number. For some reason this can result in spurious warnings concerning the hidden variable <code>.Random.Seed</code>. To work around this, set a seed in the <code>setup</code> chunk of your R Markdown document, e.g.:</li>
</ul>
<pre class="r"><code>library(bpexploder)
set.seed(5437)</code></pre>
</div>
